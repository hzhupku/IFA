dataset: # Required.
  type: cityscapes
  train:
    data_root: /path/to/cityscapes
    data_list: /path/to/cityscapes/fine_train.txt
    flip: True
    GaussianBlur: False
    rand_resize: [0.5, 2.0]
    #rand_rotation: [-10.0, 10.0]
    crop:
      type: rand
      size: [769, 769] # crop image with HxW size
  val:
    data_root: /path/to/cityscapes
    data_list: /path/to/cityscapes/fine_val.txt
    crop:
      type: center
      size: [769, 769] # crop image with HxW size
  batch_size: 2
  workers: 2
  mean: [123.675, 116.28, 103.53]
  std: [58.395, 57.12, 57.375]
  ignore_label: 255

trainer: # Required.
  epochs: 100
  start_epochs: 0
  eval_on: True
  optimizer:
    type: SGD
    kwargs:
      lr: 0.01
      momentum: 0.9
      weight_decay: 0.0005
  lr_scheduler:
    mode: poly
    kwargs:
      power: 0.9

saver:
  snapshot_dir: checkpoints
  pretrain: ''

criterion:
  type: ohem
  kwargs:
    thresh: 0.7
    min_kept: 100000

net: # Required.
  num_classes: 19
  sync_bn: True
  aux_loss:
    aux_plane: 1024
    loss_weight: 0.4
  encoder:
    type: pyseg.models.resnet.resnet50
    kwargs:
      fpn: True
      multi_grid: True
      zero_init_residual: True
      replace_stride_with_dilation: [False, False, False]  #layer0...1 is fixed, layer2...4
  decoder:
    type: pyseg.models.fpn_ifa.fpn_ifa
    kwargs:
      inner_planes: 256
      dilations: [12, 24, 36]
      ultra_pe: True
      pos_dim: 24
      no_aspp: True
      require_grad: True
